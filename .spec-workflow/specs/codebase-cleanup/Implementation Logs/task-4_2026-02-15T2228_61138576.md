# Implementation Log: Task 4

**Summary:** Migrated all `throw new Error(...)` in 5 provider files to appropriate AppError subclasses: type guards → AppError(400, INVALID_PROVIDER), HTTP failures → AppError(502, UPSTREAM_ERROR), integrity failures → AppError(502, INTEGRITY_ERROR), and "no versions found" → NotFoundError. Total: 29 replacements across vanilla.ts, paper.ts, fabric.ts, forge.ts, neoforge.ts. registry.ts left untouched.

**Timestamp:** 2026-02-15T22:28:04.276Z
**Log ID:** 61138576-0c7f-4ff9-a970-ad4a034178f6

---

## Statistics

- **Lines Added:** +34
- **Lines Removed:** -29
- **Files Changed:** 5
- **Net Change:** 5

## Files Modified
- packages/backend/src/providers/vanilla.ts
- packages/backend/src/providers/paper.ts
- packages/backend/src/providers/fabric.ts
- packages/backend/src/providers/forge.ts
- packages/backend/src/providers/neoforge.ts

## Files Created
_No files created_

---

## Artifacts

### Functions

#### AppError (usage in providers)
- **Purpose:** Used as base error class for provider errors with proper HTTP status codes and error codes. Replaces raw Error throws.
- **Location:** packages/backend/src/utils/errors.ts:5
- **Signature:** new AppError(message: string, statusCode: number, code: string)
- **Exported:** Yes

#### NotFoundError (usage in providers)
- **Purpose:** Used for 'no versions found' scenarios in forge and neoforge providers. Produces 404 responses.
- **Location:** packages/backend/src/utils/errors.ts:16
- **Signature:** new NotFoundError(resource: string, id: string)
- **Exported:** Yes

### Integrations

#### Integration
- **Description:** All 5 provider files now import AppError (and NotFoundError where needed) from ../utils/errors.js. Error classification: INVALID_PROVIDER (400) for type guard mismatches, UPSTREAM_ERROR (502) for external API failures and installer failures, INTEGRITY_ERROR (502) for SHA hash mismatches, NotFoundError (404) for missing versions.
- **Frontend Component:** N/A
- **Backend Endpoint:** Provider layer (vanilla, paper, fabric, forge, neoforge)
- **Data Flow:** Provider throws AppError/NotFoundError → Express error middleware catches → returns structured JSON with proper HTTP status code

