# Implementation Log: Task 6

**Summary:** Migrated all throw new Error(...) in 4 launcher service files to AppError/NotFoundError with proper HTTP status codes. Left all 5 cancellation throws in prepare-service.ts untouched as required.

**Timestamp:** 2026-02-15T22:26:07.515Z
**Log ID:** 64d90cc7-c159-4e9b-994e-8e67fc600aca

---

## Statistics

- **Lines Added:** +35
- **Lines Removed:** -23
- **Files Changed:** 4
- **Net Change:** 12

## Files Modified
- packages/backend/src/services/version-service.ts
- packages/backend/src/services/library-service.ts
- packages/backend/src/services/asset-service.ts
- packages/backend/src/services/mod-loader-service.ts

## Files Created
_No files created_

---

## Artifacts

### Functions

#### VersionService.getManifest
- **Purpose:** Now throws AppError(502, UPSTREAM_ERROR) on fetch failure instead of raw Error
- **Location:** packages/backend/src/services/version-service.ts:30
- **Signature:** async getManifest(): Promise<VersionManifest>
- **Exported:** Yes

#### VersionService.downloadVersionJson
- **Purpose:** Now throws NotFoundError for missing version, AppError(502) for download/SHA1 failures
- **Location:** packages/backend/src/services/version-service.ts:61
- **Signature:** async downloadVersionJson(versionId: string, signal?: AbortSignal): Promise<Record<string, unknown>>
- **Exported:** Yes

#### VersionService.downloadGameJar
- **Purpose:** Now throws NotFoundError for missing client download, AppError(502) for fetch/SHA1/body failures
- **Location:** packages/backend/src/services/version-service.ts:101
- **Signature:** async downloadGameJar(versionId: string, signal?: AbortSignal): Promise<string>
- **Exported:** Yes

#### LibraryService.downloadLibraries
- **Purpose:** Now throws AppError(502, UPSTREAM_ERROR) for missing libraries field
- **Location:** packages/backend/src/services/library-service.ts:53
- **Signature:** async downloadLibraries(versionJson, onProgress?, signal?): Promise<string[]>
- **Exported:** Yes

#### LibraryService.downloadArtifact (private)
- **Purpose:** Now throws AppError(502, UPSTREAM_ERROR) on SHA1 mismatch
- **Location:** packages/backend/src/services/library-service.ts:227
- **Signature:** private async downloadArtifact(artifact, destPath, signal?): Promise<void>
- **Exported:** No

#### AssetService.downloadAssetIndex
- **Purpose:** Now throws AppError(502, UPSTREAM_ERROR) for missing assetIndex, download failures, SHA1 mismatches
- **Location:** packages/backend/src/services/asset-service.ts:38
- **Signature:** async downloadAssetIndex(versionJson): Promise<AssetIndex>
- **Exported:** Yes

#### AssetService.downloadAsset (private)
- **Purpose:** Now throws AppError(502, UPSTREAM_ERROR) for download failures, missing body, SHA1 mismatches
- **Location:** packages/backend/src/services/asset-service.ts:120
- **Signature:** private async downloadAsset(hash, signal?): Promise<void>
- **Exported:** No

#### getClientLoaderVersions
- **Purpose:** Now throws AppError(502) for unsupported loader and API failures
- **Location:** packages/backend/src/services/mod-loader-service.ts:42
- **Signature:** async getClientLoaderVersions(loader, mcVersion): Promise<Array<{version, stable}>>
- **Exported:** Yes

#### installClientLoader
- **Purpose:** Now throws AppError(502) for unsupported loader/API failures, NotFoundError for missing versions, AppError(502) for download failures
- **Location:** packages/backend/src/services/mod-loader-service.ts:69
- **Signature:** async installClientLoader(instanceId, loader, loaderVersion?): Promise<void>
- **Exported:** Yes

